@model EventTicketingSystem.Models.EventDetailsVm
@{
  ViewData["Title"] = Model.Title;

  string StatusClass(string s) => s?.ToLower() switch
  {
    "live" => "success",
    "upcoming" => "secondary",
    "completed" => "dark",
    "cancelled" => "danger",
    _ => "secondary"
  };
}

<div class="container py-4">
@if (!string.IsNullOrWhiteSpace(Model.ImagePath))
{
    <div class="mb-3">
      <img src="@Model.ImagePath" alt="@Model.Title" class="img-fluid rounded"
        style="max-height:360px; width:100%; object-fit:cover;" />
    </div>
}
  <div class="row">
    <div class="col-lg-8">
      <div class="d-flex align-items-center gap-2 mb-2"></div>
      <h1 class="h3 mb-0">@Model.Title</h1>
      <span class="badge text-bg-@StatusClass(Model.Status)">@Model.Status</span>


      <div class="text-muted mb-3">
        @Model.StartsAt.ToString("dddd, dd MMM yyyy ‚Ä¢ h:mm tt") ‚Äî @Model.Venue
        <br />
        Category: <span class="badge text-bg-light">@Model.Category</span>
      </div>

      <p class="mb-4">@Model.Description</p>
    </div>
    <div class="col-lg-4">


      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="mb-2">Price</div>
          <div class="h4">LKR @Model.TicketPrice.ToString("N0")</div>

          <div class="small text-muted mb-3">
            Available: @(Model.TotalTickets - Model.SoldCount) / @Model.TotalTickets
          </div>

          @if (Model.CanBuy)
          {
            <a class="btn btn-dark w-100" asp-controller="Checkout" asp-action="Start" asp-route-id="@Model.EventId">Book
              Now</a>
          }
          else
          {
            <button class="btn btn-secondary w-100" disabled>Not Available</button>
          }

          <hr class="my-3" />

          <div class="small text-muted">Organizer</div>
          <div class="fw-semibold mb-1">@Model.OrganizerName</div>

          @if (!string.IsNullOrWhiteSpace(Model.OrganizerPhone) || !string.IsNullOrWhiteSpace(Model.OrganizerEmail))
          {
            <div class="small">
              @if (!string.IsNullOrWhiteSpace(Model.OrganizerPhone))
              {
                <div>üìû @Model.OrganizerPhone</div>
              }
              @if (!string.IsNullOrWhiteSpace(Model.OrganizerEmail))
              {
                <div>‚úâÔ∏è <a href="mailto:@Model.OrganizerEmail">@Model.OrganizerEmail</a></div>
              }
            </div>
          }
          else
          {
            <div class="small text-muted">No contact details provided.</div>
          }
        </div>
      </div>
    </div>
  </div>